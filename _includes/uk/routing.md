# Маршрутизація

Маршрутизація в Flight здійснюється за допомогою a звязку URL адреси з функцією.

``` php?start_inline=1
Flight::route('/', function(){
    echo 'hello world!';
});
```

Можна використати будь який обєкт який можна викликати(callback). Ось таким чином можна використати функцію:

``` php?start_inline=1
function hello(){
    echo 'hello world!';
}

Flight::route('/', 'hello');
```

А ось таким метод класу:

``` php?start_inline=1
class Greeting {
    public static function hello() {
        echo 'hello world!';
    }
}

Flight::route('/', array('Greeting','hello'));
```

Маршрути зіставляються у порядку написання. Перший маршрут який відповість на запит буде працювати.

## Методи маршрутизації

По замовчуванню маршрути працюють для усіх методів запиту. Ви можете використати конкретні методи дописуючи ідентифікатор перед URL.

``` php?start_inline=1
Flight::route('GET /', function(){
    echo 'Я відреагував на GET запит.';
});

Flight::route('POST /', function(){
    echo 'Я відреагував на POST запит.';
});
```

Ви можете використати декілька методів для одного виклику використовуючи роздільник `|`:

``` php?start_inline=1
Flight::route('GET|POST /', function(){
    echo 'Я відгукнусь на GET або на POST запит.';
});
```

## Регулярні вирази

Ви можете використовувати регулярні вирази у маршрутах:

``` php?start_inline=1
Flight::route('/user/[0-9]+', function(){
    // Це буде відгукуватись на /user/1234
});
```

## Іменні параметри (змінні)

Ви можете вказати іменні параметри в маршрутах він буде передаватись разом із викликом до функції.

``` php?start_inline=1
Flight::route('/@name/@id', function($name, $id){
    echo "hello, $name ($id)!";
});
```

Ви можете прописати регулярні вирази з вашими іменними параметрами використовуючи роздільник `:`

``` php?start_inline=1
Flight::route('/@name/@id:[0-9]{3}', function($name, $id){
    // This will match /bob/123
    // But will not match /bob/12345
});
```

## Необовязкові параметри

Ви можете використовувати іменні параметри які є необовязковими обернувши їх у дужки.

``` php?start_inline=1
Flight::route('/blog(/@year(/@month(/@day)))', function($year, $month, $day){
    // Будуть працювати наступні URL-и:
    // /blog/2012/12/10
    // /blog/2012/12
    // /blog/2012
    // /blog
});
```

Усі додаткові параметри які будуть відсутні передаватимуться як NULL.

## Символи

Звіряння проводиться лише на окремих сегментах шляху. Якщо ви хочете щоб після первного шляху мпрописувались будь-які параметри використовуйте роздільник `*`

``` php?start_inline=1
Flight::route('/blog/*', function(){
    // Це буде працювати при такому запиті /blog/2000/02/01
});
```

Щоб направляти усі маршрути до певного виразу використовуйте:

``` php?start_inline=1
Flight::route('*', function(){
    // Будь що
});
```

## Передача

Ви можете передати виконання наступному маршруту прописавши returning `true` у функції.

``` php?start_inline=1
Flight::route('/user/@name', function($name){
    // Перевіряємо умову
    if ($name != "Bob") {
        // Переходимо до наступного маршруту
        return true;
    }
});

Flight::route('/user/*', function(){
    // Він буде викликаний
});
```

## Інформація про маршрут

Якщо ви хочете перевірити інформацію про маршрут, ви можете передати у ваш маршрут
обєкт, котрий далі буде передавати`true` якщо цей параметр присутній
у маршруті. Цей обєкт завжди передається останнім параметром у функцію.

``` php?start_inline=1
Flight::route('/', function($route){
    // Масив методів
    $route->methods;

    // Масив іменних параметрів
    $route->params;

    // Масив регулярних виразів
    $route->regex;

    // Містить '*' в URL
    $route->splat;
}, true);
```
